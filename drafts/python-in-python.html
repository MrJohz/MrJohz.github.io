<!DOCTYPE html>
<html lang="en">

  <head>
      <title>Johz</title>
      <link href='//fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,700italic,400,600,700' rel='stylesheet' type='text/css' />
      <link href='//fonts.googleapis.com/css?family=Merriweather:300' rel='stylesheet' type='text/css'/>
      <link href='//fonts.googleapis.com/css?family=Source+Code+Pro:200,400,700' rel='stylesheet' type='text/css'/>
      <link rel="stylesheet" type="text/css" href="https://mrjohz.github.io/theme/css/icons.css"/>
      <link rel="stylesheet" type="text/css" href="https://mrjohz.github.io/theme/css/styles.css"/>
      <meta charset="utf-8" />
  </head>

  <body id="index">
    <!-- header -->
    <header class="siteheader">
        <div class= "sitetitle">
          <a class="nodec emph" href="https://mrjohz.github.io">
            Johz
          </a>
        </div>

      <div class = "sitebanner">
        <h3 class ="sitesubtitle">  <script>
    quotes = [
        "The blog that's always right, for an entirely arbitrary value of&nbsp;'right'.",
        "Disclaimer: I have no idea what I'm doing']&lt;&amp;#47;div&gt;); DROP TABLE&nbsp;*;",
        "Currently working towards being 100% <a href='http://xkcd.com/1271'>XKCD/1271</a>&nbsp;compliant.",
        "More than just a blog, it's a way of&nbsp;life.",
        "- zen -",
        "This div container is left deliberately&nbsp;blank.",
        "<a href='https://github.com/MrJohz'>Fork me on GitHub!</a>  Fix an issue with Johz&nbsp;today!",
        "Proud Fenda Scum",
    ]

    index = Math.floor(Math.random() * quotes.length);
    document.write(quotes[index])
  </script>
  <noscript>
    Proud Fenda Scum
  </noscript>
</h3>
        <!-- nav -->
        <nav class="menu">
          <ul>
            <!-- menu items-->
            <!--pages-->
            <!-- services icons -->
          </ul>
        </nav>
      </div> <!-- sitebanner -->
    </header>

    <!-- content -->

<section class="content">

  <h3 class="posttitle">
    <a class="nodec" href="/drafts/python-in-python.html" rel="bookmark" title="Permalink to Writing Python inÂ Python">
      Writing Python in&nbsp;Python
    </a>
  </h3>

  <div class="postinfo">
    <p class="published" title="2015-04-15T11:50:00+01:00">
      Wed 15 April 2015
    </p>

  </div><!-- .postinfo -->

  <div class="article">
    <p>Python was my first programming language.  Some time around the age of sixteen or
seventeen, I got it into my head that I should learn a programming language, and one thing
lead to another, and I ended up working through Swaroop&#8217;s <a href="http://www.swaroopch.com/notes/python/">A Byte of Python</a>, and
then Sande <span class="amp">&amp;</span> Sande&#8217;s <a href="http://www.manning.com/sande/">Hello World</a>.  The latter was particularly good,
and I learned a lot of stuff, and, alongside most new programmers, I loved getting my
computer to do things that I&#8217;d told it to&nbsp;do.</p>
<p>That said, Python didn&#8217;t excite me.  Programming was cool, and new, and fun, but Python
itself was, well, the tool I used.  And a fairly standard tool at that.  What changed
was <a href="http://corepython.com/">Core Python Programming</a>.  (Yes, this is basically book review corner,
I&#8217;ll get to the more interesting stuff in a minute&#8230;)  Core Python, despite being
somewhat out-of-date at this point (although it does include notes on pre-announced 2.6
features, and a couple of paragraphs on how Python will slowly be transitioning to
&#8220;Python 3000&#8221;, which I&#8217;m sure if very exciting news for all of us!) was a particularly
good book at describing Python, rather than just programming.  Which finally brings us
on to the first bit of code that made me feel really excited about <em>Python</em>.</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">MyNumber</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">my_num</span> <span class="o">=</span> <span class="n">num</span>

    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">MyNumber</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">my_num</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">my_num</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;MyNumber(&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">my_num</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;)&quot;</span>
</pre></div>


<p>What&#8217;s so special about these two lines?  Well, this is a method inside a user-defined
class in Python.  More specifically, it&#8217;s a &#8220;magic method&#8221;, or dunder method (dunder as
in double underscore) that is called when the addition operator is used on the defined
class.  It allows the user of this class to write code that looks like&nbsp;this:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">MyNumber</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">MyNumber</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>  <span class="c"># MAGIC!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">my_num</span>
<span class="go">15</span>
</pre></div>


<p>To me, however, this was my first chance to break open Python and write&nbsp;inside.</p>
<p>You see, Python is written in Python.  This is an almost entirely untrue statement, so I
probably ought to explain myself first.  I&#8217;m not talking about the interpreter, which for
most people is written in C.  No, I&#8217;m talking about the language itself.  The language
&#8220;Python&#8221; is written in&nbsp;Python.</p>
<p>This statement is only somewhat untrue.  That&#8217;s a start!  Here&#8217;s an&nbsp;example.</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">MyNumber</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">__add__</span>
<span class="go">&lt;method-wrapper &#39;__add__&#39; of int object at 0x829c1c0&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">__add__</span>
<span class="go">&lt;bound method MyNumber.__add__ of MyNumber(3)&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">__add__</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">+</span> <span class="mi">7</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">__add__</span><span class="p">(</span><span class="n">MyNumber</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span>
<span class="go">MyNumber(10)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">+</span> <span class="n">MyNumber</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="go">MyNumber(10)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">+</span> <span class="s">&quot;string&quot;</span>  <span class="c"># Python doesn&#39;t do automatic coercion, remember!</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">unsupported operand type(s) for +: &#39;int&#39; and &#39;str&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">__add__</span><span class="p">(</span><span class="s">&quot;string&quot;</span><span class="p">)</span>  <span class="c"># Surely this should do the same thing?</span>
<span class="go">NotImplemented</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">+</span> <span class="s">&quot;string&quot;</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">5</span>, in <span class="n">__add__</span>
<span class="gr">AttributeError</span>: <span class="n">&#39;str&#39; object has no attribute &#39;my_num&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">__add__</span><span class="p">(</span><span class="s">&quot;string&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">5</span>, in <span class="n">__add__</span>
<span class="gr">AttributeError</span>: <span class="n">&#39;str&#39; object has no attribute &#39;my_num&#39;</span>
</pre></div>


<p>The most interesting bits here are the differences between the built-in int operations,
and the custom MyNumber class operations.  Here&#8217;s each one in&nbsp;turn:</p>
<p>Firstly, in Python 3, classes have functions attached to them.&nbsp;Instances</p>
  </div><!-- .content -->

</section>


    <!-- footer -->
    <footer>
      <p>
        Â© Jonathan Frere, license <a href=""> </a>
        unless otherwise noted.
        Generated by <a href= "http://docs.getpelican.com/">Pelican</a> with
        <a href="http://github.com/porterjamesj/crowsfoot">crowsfoot</a> theme.
      </p>
    </footer>
  </body>
</html>